/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define(["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,esri/map,esri/geometry,esri/symbol,dojo/parser,dijit/layout/ContentPane,dijit/Menu,dijit/form/Button,esri/tasks/geometry,esri/WKIDUnitConversion"],function(_1,_2,_3){_2.provide("esri.dijit.Measurement");_2.require("dijit._Widget");_2.require("dijit._Templated");_2.require("esri.map");_2.require("esri.geometry");_2.require("esri.symbol");_2.require("dojo.parser");_2.require("dijit.layout.ContentPane");_2.require("dijit.Menu");_2.require("dijit.form.Button");_2.require("esri.tasks.geometry");_2.require("esri.WKIDUnitConversion");(function(){var _4=[_2.moduleUrl("esri.dijit","css/Measurement.css")];var _5=document.getElementsByTagName("head").item(0),_6;for(var i=0,il=_4.length;i<il;i++){_6=document.createElement("link");_6.type="text/css";_6.rel="stylesheet";_6.href=_4[i].toString();_5.appendChild(_6);}}());_2.declare("esri.dijit.Measurement",[_1._Widget,_1._Templated],{widgetsInTemplate:true,templateString:"<div class=\"esriMeasurement\">\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='area' checked='false' iconClass='areaIcon' showLabel='false' dojoAttachEvent='onClick:areaToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='distance' iconClass='distanceIcon' showLabel='false' dojoAttachEvent='onClick:distanceToggleButton'></div>\r\n  <div dojoType='dijit.form.ToggleButton' baseClass='esriButton' dojoAttachPoint='location' iconClass='locationIcon' showLabel='false' dojoAttachEvent='onClick:locationToggleButton'></div>\r\n  <div style=\"display:inline;margin-left:2px;margin-right:2px;padding-top:2px;\">|</div>\r\n  <button dojoType='dijit.form.DropDownButton' baseClass='esriToggleButton' dojoAttachPoint='unit' label='unit' value='unit' style='visibility:hidden;'></button>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultLabel' class='resultLabel'></div>\r\n  <div dojoType='dijit.layout.ContentPane' dojoAttachPoint='resultValue' align='left' class='result'></div>\r\n</div>",unitDictionary:[],result:null,inputPoints:[],measureGraphics:[],numberPattern:"#,###,###,##0.0",constructor:function(_7,_8){_7=_7||{};if(!_7.map){console.log("dijit.MeasureTool: unable to find the 'map' property in parameters");return;}this._map=_7.map;this._map.cs=this._checkCS(this._map.spatialReference);this._geometryService=esri.config.defaults.geometryService;if(_7.pointSymbol){this._pointSymbol=_7.pointSymbol;}else{var _9=_2.moduleUrl("esri.dijit","./images/flag.png").toString();this._pointSymbol=new esri.symbol.PictureMarkerSymbol(_9,24,24);this._pointSymbol.setOffset(9,11);}if(_7.lineSymbol){this._lineSymbol=_7.lineSymbol;}else{this._lineSymbol=new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new _2.Color([0,128,255]),3);}if(_7.defaultLengthUnit){this._defaultLengthUnit=_7.defaultLengthUnit;}else{this._defaultLengthUnit=esri.Units.MILES;}if(_7.defaultAreaUnit){this._defaultAreaUnit=_7.defaultAreaUnit;}else{this._defaultAreaUnit=esri.Units.ACRES;}if(_7.defaultLocationUnit){this._defaultLocationUnit=_7.defaultLocationUnit;}else{this._defaultLocationUnit=esri.Units.DECIMAL_DEGREES;}this._snappingCallback=_2.hitch(this,this._snappingCallback);},startup:function(){var _a=esri.bundle.widgets.measurement;this.unitDictionary[_a.NLS_length_miles]=1;this.unitDictionary[_a.NLS_length_kilometers]=1.609344;this.unitDictionary[_a.NLS_length_feet]=5280;this.unitDictionary[_a.NLS_length_meters]=1609.34;this.unitDictionary[_a.NLS_length_yards]=1760;this.unitDictionary["Nautical Miles"]=0.869;this.unitDictionary[_a.NLS_area_acres]=1;this.unitDictionary[_a.NLS_area_sq_kilometers]=0.004047;this.unitDictionary[_a.NLS_area_sq_miles]=0.0015625;this.unitDictionary[_a.NLS_area_sq_feet]=43560;this.unitDictionary[_a.NLS_area_sq_meters]=4046.87;this.unitDictionary[_a.NLS_area_hectares]=0.4047;this.unitDictionary[_a.NLS_area_sq_yards]=4840;this.units={"esriMiles":_a.NLS_length_miles,"esriKilometers":_a.NLS_length_kilometers,"esriFeet":_a.NLS_length_feet,"esriMeters":_a.NLS_length_meters,"esriYards":_a.NLS_length_yards,"esriAcres":_a.NLS_area_acres,"esriSquareKilometers":_a.NLS_area_sq_kilometers,"esriSquareMiles":_a.NLS_area_sq_miles,"esriSquareFeet":_a.NLS_area_sq_feet,"esriSquareMeters":_a.NLS_area_sq_meters,"esriHectares":_a.NLS_area_hectares,"esriSquareYards":_a.NLS_area_sq_yards,"esriDecimalDegrees":_a.NLS_decimal_degrees,"esriDegreeMinuteSeconds":_a.NLS_deg_min_sec};_1.byNode(this.distance.domNode).setLabel(esri.bundle.widgets.measurement.NLS_distance);_1.byNode(this.area.domNode).setLabel(esri.bundle.widgets.measurement.NLS_area);_1.byNode(this.location.domNode).setLabel(esri.bundle.widgets.measurement.NLS_location);_1.byNode(this.resultLabel.domNode).setContent(esri.bundle.widgets.measurement.NLS_resultLabel);},measureArea:function(){this._map.__setClickDuration(0);this._createAreaUnitList();this.inputPoints=[];this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this.tempGraphic.setGeometry(new esri.geometry.Polyline());this._map.graphics.add(this.tempGraphic);if(this._map.cs==="PCS"){this._geometryAreaHandler=_2.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea");}this.mouseClickMapHandler=_2.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this.doubleClickMapHandler=_2.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler");},measureDistance:function(){this._map.__setClickDuration(0);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=_2.connect(this._map,"onExtentChange",this,"_projectMapExtent");}this.inputPoints=[];this._createLengthUnitList();this.mouseClickMapHandler=_2.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this.doubleClickMapHandler=_2.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler");},measureLocation:function(){this._map.__setClickDuration(0);this.measureGraphics=[];this._createLocationUnitList();this._map.graphics.remove(this.locationGraphic);if(this._map.cs==="PCS"){this._projectMapExtent(this._map.extent);this._mapExtentChangeHandler=_2.connect(this._map,"onExtentChange",_2.hitch(this,this._projectMapExtent));}this._clickMapHandler=_2.connect(this._map,"onClick",this,"_measureLocationClickHandler");this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_showCoordinates");this.mouseDragMapHandler=_2.connect(this._map,"onMouseDrag",_2.hitch(this,function(){_1.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));},setTool:function(_b,_c){this.closeTool();var _d=_1.byNode(this[_b].domNode).checked;_2.style(this.unit.domNode,"visibility","visible");_1.byNode(this.area.domNode).setAttribute("checked",false);_1.byNode(this.distance.domNode).setAttribute("checked",false);_1.byNode(this.location.domNode).setAttribute("checked",false);if(_c===true||_c===false){_d=_c;}_1.byNode(this[_b].domNode).setAttribute("checked",_d);if(_d){this.activeTool=_b;if(this.map.isDoubleClickZoom){this._map.disableDoubleClickZoom();}if(_b==="area"){this.measureArea();}else{if(_b==="distance"){this.measureDistance();}else{if(_b==="location"){this.measureLocation();}}}if(this._map.snappingManager){this._map.snappingManager._startSelectionLayerQuery();this._map.snappingManager._setUpSnapping();}}},areaToggleButton:function(){this.clearResult();this.setTool("area");},distanceToggleButton:function(){this.clearResult();this.setTool("distance");},locationToggleButton:function(){this.clearResult();this.setTool("location");},closeTool:function(){var _e=this._map;_e.__resetClickDuration();if(!_e.isDoubleClickZoom){_e.enableDoubleClickZoom();}this.inputPoints=[];if(_e.snappingManager&&_e.snappingManager._snappingGraphic){_e.graphics.remove(_e.snappingManager._snappingGraphic);}_2.disconnect(this.mouseClickMapHandler);_2.disconnect(this.mouseMoveMapHandler);_2.disconnect(this.doubleClickMapHandler);_2.disconnect(this.mouseDragMapHandler);_2.disconnect(this._clickMapHandler);_2.disconnect(this._mapExtentChangeHandler);_2.disconnect(this._geometryAreaHandler);if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();this._map.snappingManager._killOffSnapping();}},clearResult:function(){var _f=this._map;this.result=0;_1.byNode(this.resultValue.domNode).setAttribute("content","");for(var i=0;i<this.measureGraphics.length;i++){_f.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];_f.graphics.remove(this.tempGraphic);},show:function(){esri.show(this.domNode);},hide:function(){esri.hide(this.domNode);},showTool:function(_10){var _11=this[_10].domNode;_11.style.display="inline";},hideTool:function(_12){var _13=this[_12].domNode;_13.style.display="none";},destroy:function(){this.closeTool();this.clearResult();this.inherited(arguments);this._map=this._geometryService=this.measureGraphic=this.measureGraphic=this.tempGraphic=null;},onMeasureEnd:function(){},_densifyGeometry:function(_14){if(this._map.cs==="Web Mercator"){_14=esri.geometry.webMercatorToGeographic(_14);}var _15;if(this._map.cs==="PCS"){_15=_14;}else{_15=esri.geometry.geodesicDensify(_14,500000);}if(this._map.cs==="Web Mercator"){_15=esri.geometry.geographicToWebMercator(_15);}return _15;},_measureAreaMouseClickHandler:function(evt){var _16;if(this._map.snappingManager){_16=this._map.snappingManager._snappingPoint;}var _17=_16||evt.mapPoint;this.inputPoints.push(_17);this._currentStartPt=_17;if(this.inputPoints.length===1){this.tempGraphic.setGeometry(new esri.geometry.Polyline());for(var i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_area_acres);this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");}this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);if(this.inputPoints.length>1){var _18=new esri.geometry.Polyline(this._map.spatialReference);_18.addPath([this.inputPoints[this.inputPoints.length-2],_17]);var _19=new esri.geometry.Polyline(this._map.spatialReference);_19.addPath([this.inputPoints[0],_17]);var _1a=this._densifyGeometry(_18);var _1b=this._densifyGeometry(_19);this.tempGraphic.setGeometry(_1b);this.measureGraphic.setGeometry(_1a);this._map.graphics.add(this.measureGraphic);}},_measureAreaMouseMoveHandler:function(evt){var _1c;if(this.inputPoints.length>0){var _1d=new esri.geometry.Polyline(this._map.spatialReference);var _1e;if(this._map.snappingManager){_1e=this._map.snappingManager._snappingPoint;}_1c=_1e||evt.mapPoint;_1d.addPath([this._currentStartPt,_1c]);var _1f=this._densifyGeometry(_1d);this.tempGraphic.setGeometry(_1f);}if(this.inputPoints.length>1){var _20=new esri.geometry.Polyline(this._map.spatialReference);_20.addPath([_1c,this.inputPoints[0]]);var _21=this._densifyGeometry(_20);this.tempGraphic.setGeometry(this.tempGraphic.geometry.addPath(_21.paths[0]));}},_measureAreaDblClickHandler:function(evt){_2.disconnect(this.mouseMoveMapHandler);var _22=new esri.geometry.Polygon(this._map.spatialReference);var _23=[];for(var i=0;i<this.inputPoints.length;i++){_23.push([this.inputPoints[i].x,this.inputPoints[i].y]);}_23.push([this.inputPoints[0].x,this.inputPoints[0].y]);_22.addRing(_23);this.inputPoints=[];this.measurementGeometry=this._densifyGeometry(_22);this._getArea(_22);},_getArea:function(_24){var _25=[];var _26=new esri.tasks.AreasAndLengthsParameters();_26.areaUnit=esri.tasks.GeometryService.UNIT_ACRES;if(esri.geometry.polygonSelfIntersecting(_24)){this._geometryService.simplify([_24],_2.hitch(this,function(_27){_2.forEach(_27,_2.hitch(this,function(_28,idx){if(this._map.cs==="PCS"){_26.polygons=_27;this._geometryService.areasAndLengths(_26);return;}else{if(this._map.cs==="Web Mercator"){_28=esri.geometry.webMercatorToGeographic(_28);}}_25.push(_28);}));var _29=esri.geometry.geodesicAreas(_25,esri.Units.ACRES);this._showArea(_29[0]);}));}else{if(this._map.cs==="Web Mercator"){_24=esri.geometry.webMercatorToGeographic(_24);}_25.push(_24);if(this._map.cs==="PCS"){_26.polygons=_25;this._geometryService.areasAndLengths(_26);return;}var _2a=esri.geometry.geodesicAreas(_25,esri.Units.ACRES);this._showArea(Math.abs(_2a[0]));}},_outputArea:function(_2b){this._showArea(Math.abs(_2b.areas[0]));},_showArea:function(_2c){if(_2c){this.result=_2c;var _2d=_1.byNode(this.unit.domNode).label;this._outputResult(this.result,_2d);}this.onMeasureEnd(this.activeTool,this.measurementGeometry);},_measureDistanceDblClickHandler:function(evt){_2.disconnect(this.mouseMoveMapHandler);var _2e=new esri.geometry.Polyline(this._map.spatialReference);_2e.addPath(this.inputPoints);_2e=this._densifyGeometry(_2e);this.inputPoints=[];this.onMeasureEnd(this.activeTool,_2e);},_measureDistanceMouseClickHandler:function(evt){var _2f;if(this._map.snappingManager){_2f=this._map.snappingManager._snappingPoint;}var _30=_2f||evt.mapPoint;this.inputPoints.push(_30);this._currentStartPt=_30;if(this.inputPoints.length===1){for(var i=0;i<this.measureGraphics.length;i++){this._map.graphics.remove(this.measureGraphics[i]);}this._map.graphics.remove(this.tempGraphic);this.measureGraphics=[];this.result=0;this._outputResult(this.result,esri.bundle.widgets.measurement.NLS_length_miles);this.tempGraphic=new esri.Graphic();this.tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this.tempGraphic);this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");}this.tempGraphic.setGeometry(new esri.geometry.Polyline());this.flagGraphic=new esri.Graphic();this.flagGraphic.setSymbol(this._pointSymbol);this.flagGraphic.setGeometry(_30);this.measureGraphics.push(this.flagGraphic);this._map.graphics.add(this.flagGraphic);if(this.inputPoints.length>1){this.measureGraphic=new esri.Graphic();this.measureGraphic.setSymbol(this._lineSymbol);this.measureGraphics.push(this.measureGraphic);var _31=new esri.geometry.Polyline(this._map.spatialReference);_31.addPath([this.inputPoints[this.inputPoints.length-2],_30]);var _32=this._densifyGeometry(_31);this.measureGraphic.setGeometry(_32);this._map.graphics.add(this.measureGraphic);this.result+=this._geodesicDistance(this.inputPoints[this.inputPoints.length-2],_30);this._showDistance(this.result);}},_measureDistanceMouseMoveHandler:function(evt){if(this.inputPoints.length>0){var _33=new esri.geometry.Polyline(this._map.spatialReference);var _34;if(this._map.snappingManager){_34=this._map.snappingManager._snappingPoint;}var _35=_34||evt.mapPoint;_33.addPath([this._currentStartPt,_35]);var _36=this._densifyGeometry(_33);this.tempGraphic.setGeometry(_36);var _37=this._geodesicDistance(this._currentStartPt,_35);this._showDistance(_37+this.result);}},_geodesicDistance:function(pt1,pt2){var _38=new esri.geometry.Polyline(this._map.spatialReference);if(this._map.cs==="PCS"){pt1=this._getGCSLocation(pt1);pt2=this._getGCSLocation(pt2);}_38.addPath([pt1,pt2]);if(this._map.cs==="Web Mercator"){_38=esri.geometry.webMercatorToGeographic(_38);}return esri.geometry.geodesicLengths([_38],esri.Units.MILES)[0];},_showDistance:function(_39){if(_39){this._outputResult(_39,_1.byNode(this.unit.domNode).label);}},_measureLocationClickHandler:function(evt){_1.byNode(this.location.domNode).setAttribute("checked",false);var _3a;if(this._map.snappingManager){_3a=this._map.snappingManager._snappingPoint;}var _3b=_3a||evt.mapPoint;this.locationToggleButton();this.locationGraphic=new esri.Graphic();this.locationGraphic.setGeometry(_3b);this.locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this.locationGraphic);this.measureGraphics.push(this.locationGraphic);var _3c={mapPoint:_3b};this._showCoordinates(_3c);this.onMeasureEnd(this.activeTool,_3b);},_getGCSLocation:function(pt){var _3d=pt;if(this._map.cs==="Web Mercator"){_3d=esri.geometry.webMercatorToGeographic(_3d);}else{if(this._map.cs==="PCS"){if(this._map._newExtent){var _3e=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin));var _3f=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));var _40=(_3d.x-this._map.extent.xmin)*_3e+this._map._newExtent.xmin;var _41=(_3d.y-this._map.extent.ymin)*_3f+this._map._newExtent.ymin;_3d=new esri.geometry.Point(_40,_41);}}}return _3d;},_projectMapExtent:function(_42){var _43=new esri.Graphic(_42);var _44=new esri.SpatialReference({wkid:4326});this._geometryService.project([_43.geometry],_44,_2.hitch(this,function(_45){if(!this.mouseMoveMapHandler&&this.activeTool==="location"){this.mouseMoveMapHandler=_2.connect(this._map,"onMouseMove",_2.hitch(this,this._showCoordinates));this.mouseDragMapHandler=_2.connect(this._map,"onMouseDrag",_2.hitch(this,function(){_1.byNode(this.resultValue.domNode).setAttribute("disabled",true);}));}this._map._newExtent=_45[0];}));},_showCoordinates:function(evt){var _46;if(this._map.snappingManager){_46=this._map.snappingManager._snappingPoint;}var _47=_46||evt.mapPoint;var _48=this._getGCSLocation(_47);this.locationX=_48.x;this.locationY=_48.y;this._outputLocationResult(_48.x,_48.y,_1.byNode(this.unit.domNode).label);},_checkCS:function(_49){if(_49.wkid){if(_49.wkid===3857||_49.wkid===102100||_49.wkid===102113){return "Web Mercator";}if(esri._isDefined(esri.WKIDUnitConversion[_49.wkid])){return "PCS";}return "GCS";}if(_49.wkt){if(_49.wkt.indexOf("WGS_1984_Web_Mercator")!==-1){return "Web Mercator";}if(_49.wkt.indexOf("PROJCS")===0){return "PCS";}return "GCS";}},_switchUnit:function(_4a){_1.byNode(this.unit.domNode).setAttribute("label",_4a);if(this.result===null){return;}this._outputResult(this.result,_4a);},_outputResult:function(_4b,_4c){var _4d=_4b*this.unitDictionary[_4c];if(_4d===0){_1.byNode(this.resultValue.domNode).setAttribute("content","");}else{if(_4d>1000000){_1.byNode(this.resultValue.domNode).setAttribute("content",_2.number.format(_4d.toPrecision(9),{pattern:this.numberPattern})+" "+_4c);}else{_1.byNode(this.resultValue.domNode).setAttribute("content",_2.number.format(_4d.toFixed(2),{pattern:this.numberPattern})+" "+_4c);}}},_switchLocationUnit:function(_4e){_1.byNode(this.unit.domNode).setAttribute("label",_4e);if(this.result===null){return;}this._outputLocationResult(this.locationX,this.locationY,_4e);},_outputLocationResult:function(x,y,_4f){var lon,lat;var _50=esri.bundle.widgets.measurement;if(_4f===_50.NLS_decimal_degrees){lon=x.toFixed(6);lat=y.toFixed(6);}else{if(_4f===_50.NLS_deg_min_sec){var _51=false;var _52=false;if(x<0){_51=true;x=Math.abs(x);}if(y<0){_52=true;y=Math.abs(y);}lon=Math.floor(x)+"°"+Math.floor((x-Math.floor(x))*60)+"'"+Math.floor(((x-Math.floor(x))*60-Math.floor((x-Math.floor(x))*60))*60)+"\"";lat=Math.floor(y)+"°"+Math.floor((y-Math.floor(y))*60)+"'"+Math.floor(((y-Math.floor(y))*60-Math.floor((y-Math.floor(y))*60))*60)+"\"";if(_51){lon="-"+lon;}if(_52){lat="-"+lat;}}}_1.byNode(this.resultValue.domNode).setAttribute("content",esri.bundle.widgets.measurement.NLS_longitude+": "+lon+"<br/>"+esri.bundle.widgets.measurement.NLS_latitude+": "+lat);},_createLengthUnitList:function(){var _53=new _1.Menu({style:"display: none;"});var _54=esri.bundle.widgets.measurement;var _55=[_54.NLS_length_miles,_54.NLS_length_kilometers,_54.NLS_length_feet,_54.NLS_length_meters,_54.NLS_length_yards];_2.forEach(_55,_2.hitch(this,function(_56,idx){var _57=new _1.MenuItem({label:_56,onClick:_2.hitch(this,function(){this._switchUnit(_56);})});_57.setAttribute("class","unitDropDown");_53.addChild(_57);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_53);var _58=this.units[this._defaultLengthUnit];_1.byNode(this.unit.domNode).setAttribute("label",_58);},_createAreaUnitList:function(){var _59=new _1.Menu({style:"display: none;"});var _5a=esri.bundle.widgets.measurement;var _5b=[_5a.NLS_area_acres,_5a.NLS_area_sq_miles,_5a.NLS_area_sq_kilometers,_5a.NLS_area_hectares,_5a.NLS_area_sq_yards,_5a.NLS_area_sq_feet,_5a.NLS_area_sq_meters];_2.forEach(_5b,_2.hitch(this,function(_5c,idx){var _5d=new _1.MenuItem({label:_5c,onClick:_2.hitch(this,function(){this._switchUnit(_5c);})});_5d.setAttribute("class","unitDropDown");_59.addChild(_5d);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_59);var _5e=this.units[this._defaultAreaUnit];_1.byNode(this.unit.domNode).setAttribute("label",_5e);},_createLocationUnitList:function(){var _5f=new _1.Menu({style:"display: none;"});var _60=esri.bundle.widgets.measurement;var _61=[_60.NLS_decimal_degrees,_60.NLS_deg_min_sec];_2.forEach(_61,_2.hitch(this,function(_62,idx){var _63=new _1.MenuItem({label:_62,onClick:_2.hitch(this,function(){this._switchLocationUnit(_62);})});_63.setAttribute("class","unitDropDown");_5f.addChild(_63);}));_1.byNode(this.unit.domNode).setAttribute("dropDown",_5f);var _64=this.units[this._defaultLocationUnit];_1.byNode(this.unit.domNode).setAttribute("label",_64);}});});